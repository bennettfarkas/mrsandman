<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mrsandman.ai</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@700;800&family=JetBrains+Mono:wght@400&family=Plus+Jakarta+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
            font-weight: 500;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            overflow: hidden;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .glow {
            position: fixed;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            pointer-events: none;
            background: radial-gradient(circle, rgba(201,160,255,0.06) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            z-index: 1;
            transition: left 0.3s ease-out, top 0.3s ease-out;
        }

        .container {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            text-align: center;
        }

        h1 {
            font-family: 'Bricolage Grotesque', serif;
            font-weight: 800;
            font-size: clamp(2.5rem, 2rem + 2.5vw, 4rem);
            letter-spacing: -0.02em;
            margin-bottom: 0.6rem;
            background: linear-gradient(135deg, #c9a0ff, #7eb8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            transform: translateY(20px);
            animation: rise 0.8s ease-out 0.3s forwards;
        }

        .tagline {
            font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
            font-weight: 400;
            font-size: clamp(1rem, 0.9rem + 0.3vw, 1.15rem);
            color: #999;
            margin-bottom: 1.2rem;
            min-height: 1.4em;
            letter-spacing: 0.01em;
            opacity: 0;
            animation: fade-in 0.6s ease-out 1s forwards;
        }

        .tagline .cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #c9a0ff;
            margin-left: 2px;
            vertical-align: text-bottom;
            animation: blink 0.8s step-end infinite;
        }

        .description {
            font-size: clamp(0.88rem, 0.85rem + 0.15vw, 0.95rem);
            font-weight: 400;
            color: #777;
            max-width: 400px;
            line-height: 1.7;
            margin-bottom: 2.5rem;
            letter-spacing: 0.005em;
            opacity: 0;
            animation: fade-in 0.6s ease-out 2.8s forwards;
        }

        .signup-form {
            display: flex;
            gap: 0;
            width: 100%;
            max-width: 400px;
            opacity: 0;
            transform: translateY(10px);
            animation: rise 0.6s ease-out 3.2s forwards;
            position: relative;
            border-radius: 8px;
            padding: 1px;
            background: linear-gradient(135deg, #c9a0ff44, #7eb8ff44);
        }

        .signup-form:focus-within {
            background: linear-gradient(135deg, #c9a0ff88, #7eb8ff88);
        }

        .signup-inner {
            display: flex;
            width: 100%;
            background: #0a0a0a;
            border-radius: 7px;
            overflow: hidden;
        }

        .signup-form input[type="email"] {
            flex: 1;
            padding: 0.8rem 1rem;
            background: transparent;
            border: none;
            outline: none;
            color: #e0e0e0;
            font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
            font-weight: 400;
            font-size: 0.88rem;
            min-width: 0;
        }

        .signup-form input[type="email"]::placeholder {
            color: #555;
        }

        .signup-form button {
            padding: 0.8rem 1.3rem;
            background: linear-gradient(135deg, #c9a0ff, #7eb8ff);
            border: none;
            color: #0a0a0a;
            font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: opacity 0.2s;
        }

        .signup-form button:hover {
            opacity: 0.85;
        }

        .signup-form button:active {
            opacity: 0.7;
        }

        .success-msg {
            display: none;
            font-size: 0.9rem;
            color: #c9a0ff;
            margin-top: 1rem;
            opacity: 0;
        }

        .success-msg.show {
            display: block;
            animation: fade-in 0.4s ease-out forwards;
        }

        .status {
            font-family: 'JetBrains Mono', monospace;
            display: inline-block;
            padding: 0.35rem 0.9rem;
            border: 1px solid #222;
            border-radius: 999px;
            font-size: 0.7rem;
            color: #555;
            letter-spacing: 0.02em;
            margin-top: 2.5rem;
            opacity: 0;
            animation: fade-in 0.6s ease-out 3.6s forwards;
        }

        .status::before {
            content: '';
            display: inline-block;
            width: 5px;
            height: 5px;
            background: #c9a0ff;
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes rise {
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fade-in {
            to { opacity: 1; }
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @media (max-width: 480px) {
            .signup-inner {
                flex-direction: column;
            }
            .signup-form button {
                padding: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <canvas id="sand"></canvas>
    <div class="glow" id="glow"></div>

    <div class="container">
        <h1>MrSandman</h1>
        <p class="tagline" id="tagline"></p>
        <p class="description">something's brewing. drop your email and we'll let you know when it's time to wake up.</p>

        <form class="signup-form" id="signup">
            <div class="signup-inner">
                <input type="email" name="email" placeholder="your@email.com" required autocomplete="email">
                <button type="submit">wake me up</button>
            </div>
        </form>
        <p class="success-msg" id="success">you're on the list. sweet dreams.</p>

        <span class="status">building in dreams</span>
    </div>

    <script>
        // --- Particle canvas ---
        const canvas = document.getElementById('sand');
        const ctx = canvas.getContext('2d');
        let w, h;
        let mouse = { x: -1000, y: -1000 };

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        document.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            const glow = document.getElementById('glow');
            glow.style.left = e.clientX + 'px';
            glow.style.top = e.clientY + 'px';
        });

        const PARTICLE_COUNT = 120;
        const particles = [];

        function createParticle(randomY) {
            return {
                x: Math.random() * w,
                y: randomY ? Math.random() * h : -10,
                size: Math.random() * 2 + 0.5,
                speedY: Math.random() * 0.3 + 0.1,
                speedX: (Math.random() - 0.5) * 0.2,
                opacity: Math.random() * 0.5 + 0.1,
                hue: Math.random() > 0.5 ? 270 : 215, // purple or blue
            };
        }

        for (let i = 0; i < PARTICLE_COUNT; i++) {
            particles.push(createParticle(true));
        }

        function drawParticles() {
            ctx.clearRect(0, 0, w, h);

            for (const p of particles) {
                // mouse interaction — gentle push away
                const dx = p.x - mouse.x;
                const dy = p.y - mouse.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist < 150) {
                    const force = (150 - dist) / 150;
                    p.x += (dx / dist) * force * 1.5;
                    p.y += (dy / dist) * force * 1.5;
                }

                p.y += p.speedY;
                p.x += p.speedX;

                // drift slightly with a sine wave
                p.x += Math.sin(p.y * 0.01) * 0.15;

                if (p.y > h + 10 || p.x < -10 || p.x > w + 10) {
                    Object.assign(p, createParticle(false));
                }

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `hsla(${p.hue}, 70%, 75%, ${p.opacity})`;
                ctx.fill();
            }

            requestAnimationFrame(drawParticles);
        }
        drawParticles();

        // --- Typewriter ---
        const taglineEl = document.getElementById('tagline');
        const text = 'dream something up';
        let charIndex = 0;

        function type() {
            if (charIndex <= text.length) {
                taglineEl.innerHTML = text.slice(0, charIndex) + '<span class="cursor"></span>';
                charIndex++;
                setTimeout(type, 70 + Math.random() * 50);
            } else {
                // remove cursor after a pause
                setTimeout(() => {
                    taglineEl.innerHTML = text;
                }, 2000);
            }
        }
        setTimeout(type, 1200);

        // --- Form ---
        document.getElementById('signup').addEventListener('submit', async function(e) {
            e.preventDefault();
            const form = e.target;
            const email = form.email.value;
            const btn = form.querySelector('button');
            const originalText = btn.textContent;

            btn.textContent = '...';
            btn.disabled = true;

            try {
                // POST to Cloudflare Worker → Notion
                const res = await fetch('https://mrsandman-signup.mrsandman.workers.dev', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });

                if (res.ok) {
                    form.style.display = 'none';
                    document.getElementById('success').classList.add('show');
                } else {
                    btn.textContent = 'try again';
                    btn.disabled = false;
                }
            } catch {
                btn.textContent = 'try again';
                btn.disabled = false;
            }
        });
    </script>
</body>
</html>
